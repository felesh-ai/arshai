<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html"><link rel="search" title="Search" href="../../search.html"><link rel="next" title="Azure OpenAI Client" href="azure-client.html"><link rel="prev" title="ILLM Interface Overview" href="interface-overview.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>OpenAI Client - Arshai Documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Arshai Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <span class="sidebar-brand-text">Arshai Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../getting-started/index.html">Getting Started</a><input aria-label="Toggle navigation of Getting Started" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/quickstart.html">Quickstart Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/comprehensive-guide.html">Comprehensive Agent Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/first-agent.html">Build Your First Custom Agent</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/quickstart.html">Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/comprehensive-guide.html">Comprehensive Agent Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Philosophy</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../philosophy/index.html">Philosophy</a><input aria-label="Toggle navigation of Philosophy" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../philosophy/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../philosophy/three-layer-architecture.html">Three-Layer Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../philosophy/developer-authority.html">Developer Authority</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../philosophy/design-decisions.html">Design Decisions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../philosophy/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../philosophy/three-layer-architecture.html">Three-Layer Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../philosophy/developer-authority.html">Developer Authority</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../philosophy/design-decisions.html">Design Decisions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Framework (Core)</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Framework Core</a><input aria-label="Toggle navigation of Framework Core" checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">LLM Clients (Layer 1)</a><input aria-label="Toggle navigation of LLM Clients (Layer 1)" checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="interface-overview.html">ILLM Interface Overview</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">OpenAI Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="azure-client.html">Azure OpenAI Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="google-gemini-client.html">Google Gemini Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="openrouter-client.html">OpenRouter Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="extending-llm-clients.html">Extending LLM Clients</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../agents/index.html">Agents (Layer 2)</a><input aria-label="Toggle navigation of Agents (Layer 2)" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../agents/base-agent.html">BaseAgent Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../agents/creating-agents.html">Creating Agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../agents/tools-and-callables.html">Tools and Callables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../agents/agent-patterns.html">Agent Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../agents/stateless-design.html">Stateless Agent Design</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../agents/examples/index.html">Agent Examples</a><input aria-label="Toggle navigation of Agent Examples" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../agents/examples/01-basic-usage.html">Example 01: Basic Agent Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agents/examples/02-custom-agents.html">Example 02: Creating Custom Agents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agents/examples/03-memory-patterns.html">Example 3: Memory Patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agents/examples/04-tool-integration.html">Example 4: Tool Integration</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../implementations/agents/index.html">Agent Reference Implementations</a><input aria-label="Toggle navigation of Agent Reference Implementations" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../implementations/agents/working-memory-agent.html">WorkingMemoryAgent Reference Implementation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../building-systems/index.html">Building Systems (Layer 3)</a><input aria-label="Toggle navigation of Building Systems (Layer 3)" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../building-systems/composition-patterns.html">Example 5: Agent Composition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-systems/building-agentic-systems.html">Building Agentic Systems</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">LLM Clients (Layer 1)</a><input aria-label="Toggle navigation of LLM Clients (Layer 1)" checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="interface-overview.html">ILLM Interface Overview</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">OpenAI Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="azure-client.html">Azure OpenAI Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="google-gemini-client.html">Google Gemini Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="openrouter-client.html">OpenRouter Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="extending-llm-clients.html">Extending LLM Clients</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../agents/index.html">Agents (Layer 2)</a><input aria-label="Toggle navigation of Agents (Layer 2)" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../agents/base-agent.html">BaseAgent Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../agents/creating-agents.html">Creating Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../agents/tools-and-callables.html">Tools and Callables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../agents/agent-patterns.html">Agent Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../agents/stateless-design.html">Stateless Agent Design</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../agents/examples/index.html">Agent Examples</a><input aria-label="Toggle navigation of Agent Examples" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../agents/examples/01-basic-usage.html">Example 01: Basic Agent Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../agents/examples/02-custom-agents.html">Example 02: Creating Custom Agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../agents/examples/03-memory-patterns.html">Example 3: Memory Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../agents/examples/04-tool-integration.html">Example 4: Tool Integration</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../implementations/agents/index.html">Agent Reference Implementations</a><input aria-label="Toggle navigation of Agent Reference Implementations" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../implementations/agents/working-memory-agent.html">WorkingMemoryAgent Reference Implementation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../building-systems/index.html">Building Systems (Layer 3)</a><input aria-label="Toggle navigation of Building Systems (Layer 3)" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../building-systems/composition-patterns.html">Example 5: Agent Composition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building-systems/building-agentic-systems.html">Building Agentic Systems</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Implementations (Reference)</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../implementations/index.html">Reference Implementations</a><input aria-label="Toggle navigation of Reference Implementations" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../implementations/agents/index.html">Agent Reference Implementations</a><input aria-label="Toggle navigation of Agent Reference Implementations" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../implementations/agents/working-memory-agent.html">WorkingMemoryAgent Reference Implementation</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../implementations/orchestration/index.html">Orchestration Reference Implementations</a><input aria-label="Toggle navigation of Orchestration Reference Implementations" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../implementations/orchestration/workflow-system.html">Workflow System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../implementations/orchestration/building-your-own.html">Building Your Own Orchestration</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../implementations/memory/index.html">Memory Reference Implementations</a><input aria-label="Toggle navigation of Memory Reference Implementations" class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../implementations/memory/in-memory.html">In-Memory Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../implementations/memory/redis-memory.html">Redis Memory Manager</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../implementations/components/index.html">Component Reference Implementations</a><input aria-label="Toggle navigation of Component Reference Implementations" class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../implementations/components/embeddings.html">Embedding Implementations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../implementations/components/vector-databases.html">Vector Database - Milvus Client</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../implementations/agents/index.html">Agent Reference Implementations</a><input aria-label="Toggle navigation of Agent Reference Implementations" class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../implementations/agents/working-memory-agent.html">WorkingMemoryAgent Reference Implementation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../implementations/orchestration/index.html">Orchestration Reference Implementations</a><input aria-label="Toggle navigation of Orchestration Reference Implementations" class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../implementations/orchestration/workflow-system.html">Workflow System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../implementations/orchestration/building-your-own.html">Building Your Own Orchestration</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../implementations/memory/index.html">Memory Reference Implementations</a><input aria-label="Toggle navigation of Memory Reference Implementations" class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../implementations/memory/in-memory.html">In-Memory Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../implementations/memory/redis-memory.html">Redis Memory Manager</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../implementations/components/index.html">Component Reference Implementations</a><input aria-label="Toggle navigation of Component Reference Implementations" class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../implementations/components/embeddings.html">Embedding Implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../implementations/components/vector-databases.html">Vector Database - Milvus Client</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a><input aria-label="Toggle navigation of Tutorials" class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/simple-chatbot.html">Building a Simple Chatbot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/rag-system.html">Building a RAG System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/custom-system.html">Building a Custom Agentic System</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../reference/index.html">API Reference</a><input aria-label="Toggle navigation of API Reference" class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../reference/interfaces.html">Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/base-classes.html">Base Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/models.html">Models</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extending</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../extending/index.html">Extending Arshai</a><input aria-label="Toggle navigation of Extending Arshai" class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../extending/custom-agents.html">Building Custom Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extending/custom-llm-clients.html">Adding LLM Providers</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/nimunzn/arshai/blob/main/docs_sphinx/framework/llm-clients/openai-client.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/nimunzn/arshai/edit/main/docs_sphinx/framework/llm-clients/openai-client.rst" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="openai-client">
<h1>OpenAI Client<a class="headerlink" href="#openai-client" title="Link to this heading">¶</a></h1>
<p>The OpenAI client provides standardized access to OpenAI’s language models through the Arshai framework. It implements the full ILLM interface with support for chat, streaming, function calling, structured output, and background tasks.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This documentation reflects the actual implementation based on tested functionality. All examples are verified through the framework’s test suite.</p>
</div>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h2>
<p>Basic Setup:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">arshai.llms.openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAIClient</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">arshai.core.interfaces.illm</span><span class="w"> </span><span class="kn">import</span> <span class="n">ILLMConfig</span>

<span class="c1"># Configure the client</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">ILLMConfig</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span>    <span class="c1"># Any OpenAI model name</span>
    <span class="n">temperature</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>        <span class="c1"># 0.0 = deterministic, 1.0 = creative</span>
    <span class="n">max_tokens</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>         <span class="c1"># Response length limit</span>
    <span class="n">top_p</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>             <span class="c1"># Nucleus sampling parameter</span>
    <span class="n">frequency_penalty</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>  <span class="c1"># Reduce repetition</span>
    <span class="n">presence_penalty</span><span class="o">=</span><span class="mf">0.0</span>    <span class="c1"># Encourage topic diversity</span>
<span class="p">)</span>

<span class="c1"># Create client</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">OpenAIClient</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<p>Environment Variables:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Required</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">OPENAI_API_KEY</span><span class="o">=</span><span class="s2">&quot;your-openai-api-key&quot;</span>

<span class="c1"># Optional - for organization usage</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">OPENAI_ORG_ID</span><span class="o">=</span><span class="s2">&quot;your-organization-id&quot;</span>

<span class="c1"># Optional - for custom endpoints (e.g., Azure OpenAI)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">OPENAI_BASE_URL</span><span class="o">=</span><span class="s2">&quot;https://your-custom-endpoint.com/v1&quot;</span>
</pre></div>
</div>
</section>
<section id="supported-models">
<h2>Supported Models<a class="headerlink" href="#supported-models" title="Link to this heading">¶</a></h2>
<p>The OpenAI client supports <strong>all models available through OpenAI’s chat completions API</strong>. The client works with any model name that OpenAI’s API accepts, including:</p>
<dl class="simple">
<dt><strong>Current Popular Models</strong> (as examples):</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">gpt-4o</span></code>: Latest GPT-4 optimized model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gpt-4o-mini</span></code>: Fast and cost-effective option</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gpt-4-turbo</span></code>: Previous generation high-performance model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gpt-3.5-turbo</span></code>: Legacy but efficient model</p></li>
</ul>
</dd>
<dt><strong>Model Compatibility</strong></dt><dd><p>The client dynamically works with OpenAI’s chat completions endpoint, so any model supported by that API will work. This includes:</p>
<ul class="simple">
<li><p>All current GPT models</p></li>
<li><p>Future models as they become available</p></li>
<li><p>Custom fine-tuned models in your organization</p></li>
<li><p>Regional model variants</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>No Model Restrictions</strong>: The framework doesn’t enforce which models you can use. Simply specify any valid OpenAI model name in your configuration.</p>
<p><strong>Current Models</strong>: Check OpenAI’s documentation for the most up-to-date list of available models, pricing, and capabilities.</p>
</div>
</section>
<section id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Link to this heading">¶</a></h2>
<p>Simple conversation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">arshai.core.interfaces.illm</span><span class="w"> </span><span class="kn">import</span> <span class="n">ILLMInput</span>

<span class="c1"># Prepare input</span>
<span class="n">input_data</span> <span class="o">=</span> <span class="n">ILLMInput</span><span class="p">(</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="s2">&quot;You are a helpful travel assistant with expertise in Japanese culture and tourism.&quot;</span><span class="p">,</span>
    <span class="n">user_message</span><span class="o">=</span><span class="s2">&quot;I&#39;m planning a trip to Japan. What should I know about Tokyo?&quot;</span>
<span class="p">)</span>

<span class="c1"># Get response</span>
<span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;llm_response&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tokens used: </span><span class="si">{</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;usage&#39;</span><span class="p">][</span><span class="s1">&#39;total_tokens&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Streaming responses:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">input_data</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">chunk</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;llm_response&quot;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">[</span><span class="s2">&quot;llm_response&quot;</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">chunk</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;usage&quot;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Total tokens: </span><span class="si">{</span><span class="n">chunk</span><span class="p">[</span><span class="s1">&#39;usage&#39;</span><span class="p">][</span><span class="s1">&#39;total_tokens&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="function-calling">
<h2>Function Calling<a class="headerlink" href="#function-calling" title="Link to this heading">¶</a></h2>
<p>The OpenAI client supports both regular functions and background tasks:</p>
<p><strong>Regular Functions</strong> (results integrated into conversation):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">calculate_power</span><span class="p">(</span><span class="n">base</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">exponent</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate base raised to the power of exponent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">base</span> <span class="o">**</span> <span class="n">exponent</span>

<span class="k">def</span><span class="w"> </span><span class="nf">multiply_numbers</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Multiply two numbers together.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>

<span class="n">input_data</span> <span class="o">=</span> <span class="n">ILLMInput</span><span class="p">(</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="s2">&quot;You are a mathematics assistant. Use the provided tools for calculations.&quot;</span><span class="p">,</span>
    <span class="n">user_message</span><span class="o">=</span><span class="s2">&quot;Calculate 5 to the power of 2, then multiply the result by 3. Show each step.&quot;</span><span class="p">,</span>
    <span class="n">regular_functions</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;calculate_power&quot;</span><span class="p">:</span> <span class="n">calculate_power</span><span class="p">,</span>
        <span class="s2">&quot;multiply_numbers&quot;</span><span class="p">:</span> <span class="n">multiply_numbers</span>
    <span class="p">},</span>
    <span class="n">max_turns</span><span class="o">=</span><span class="mi">10</span>  <span class="c1"># Allow multiple function calls</span>
<span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span>
<span class="c1"># LLM will call calculate_power(5, 2), get 25, then call multiply_numbers(25, 3)</span>
</pre></div>
</div>
<p><strong>Background Tasks</strong> (fire-and-forget execution):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">log_user_interaction</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">details</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;User interaction&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log user interactions for analytics (background task).&quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">] ANALYTICS: </span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">details</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">input_data</span> <span class="o">=</span> <span class="n">ILLMInput</span><span class="p">(</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="s2">&quot;You are a helpful assistant. For every user interaction, log it for analytics.&quot;</span><span class="p">,</span>
    <span class="n">user_message</span><span class="o">=</span><span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">,</span>
    <span class="n">background_tasks</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;log_user_interaction&quot;</span><span class="p">:</span> <span class="n">log_user_interaction</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span>
<span class="c1"># LLM answers the question AND calls log_user_interaction in background</span>
</pre></div>
</div>
<p><strong>Parallel Function Calling</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">input_data</span> <span class="o">=</span> <span class="n">ILLMInput</span><span class="p">(</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="s2">&quot;You can perform multiple calculations simultaneously.&quot;</span><span class="p">,</span>
    <span class="n">user_message</span><span class="o">=</span><span class="s2">&quot;Calculate: 3^2, 4^2, and 6*7. You can call multiple functions at once.&quot;</span><span class="p">,</span>
    <span class="n">regular_functions</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;calculate_power&quot;</span><span class="p">:</span> <span class="n">calculate_power</span><span class="p">,</span>
        <span class="s2">&quot;multiply_numbers&quot;</span><span class="p">:</span> <span class="n">multiply_numbers</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="c1"># LLM can execute multiple function calls in parallel for efficiency</span>
</pre></div>
</div>
</section>
<section id="structured-output">
<h2>Structured Output<a class="headerlink" href="#structured-output" title="Link to this heading">¶</a></h2>
<p>Generate structured data using Pydantic models:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SentimentAnalysis</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Structured sentiment analysis result.&quot;&quot;&quot;</span>
    <span class="n">topic</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Main topic being analyzed&quot;</span><span class="p">)</span>
    <span class="n">sentiment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Overall sentiment (positive/negative/neutral)&quot;</span><span class="p">)</span>
    <span class="n">confidence</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Confidence score between 0.0 and 1.0&quot;</span><span class="p">)</span>
    <span class="n">key_points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;List of key points identified&quot;</span><span class="p">)</span>

<span class="n">input_data</span> <span class="o">=</span> <span class="n">ILLMInput</span><span class="p">(</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="s2">&quot;You are an expert sentiment analyst. Analyze the provided text thoroughly.&quot;</span><span class="p">,</span>
    <span class="n">user_message</span><span class="o">=</span><span class="s2">&quot;The new renewable energy project is fantastic! It will create thousands of jobs and reduce emissions significantly.&quot;</span><span class="p">,</span>
    <span class="n">structure_type</span><span class="o">=</span><span class="n">SentimentAnalysis</span>
<span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span>
<span class="n">analysis</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;llm_response&quot;</span><span class="p">]</span>  <span class="c1"># Returns SentimentAnalysis instance</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Topic: </span><span class="si">{</span><span class="n">analysis</span><span class="o">.</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sentiment: </span><span class="si">{</span><span class="n">analysis</span><span class="o">.</span><span class="n">sentiment</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Confidence: </span><span class="si">{</span><span class="n">analysis</span><span class="o">.</span><span class="n">confidence</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Key points: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">analysis</span><span class="o">.</span><span class="n">key_points</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Streaming with structured output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># For streaming, use dict-based models with schema method</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypedDict</span>

<span class="k">class</span><span class="w"> </span><span class="nc">StreamingSentiment</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
    <span class="n">topic</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">sentiment</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">confidence</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">key_points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">model_json_schema</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
            <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;topic&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Main topic&quot;</span><span class="p">},</span>
                <span class="s2">&quot;sentiment&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Sentiment&quot;</span><span class="p">},</span>
                <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;maximum&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
                <span class="s2">&quot;key_points&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span> <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}}</span>
            <span class="p">},</span>
            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;topic&quot;</span><span class="p">,</span> <span class="s2">&quot;sentiment&quot;</span><span class="p">,</span> <span class="s2">&quot;confidence&quot;</span><span class="p">,</span> <span class="s2">&quot;key_points&quot;</span><span class="p">]</span>
        <span class="p">}</span>

<span class="n">input_data</span> <span class="o">=</span> <span class="n">ILLMInput</span><span class="p">(</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="s2">&quot;Analyze sentiment and return structured data.&quot;</span><span class="p">,</span>
    <span class="n">user_message</span><span class="o">=</span><span class="s2">&quot;I love this product! It&#39;s amazing and works perfectly.&quot;</span><span class="p">,</span>
    <span class="n">structure_type</span><span class="o">=</span><span class="n">StreamingSentiment</span>
<span class="p">)</span>

<span class="k">async</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">input_data</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">chunk</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;llm_response&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">chunk</span><span class="p">[</span><span class="s2">&quot;llm_response&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">chunk</span><span class="p">[</span><span class="s2">&quot;llm_response&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;sentiment&quot;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sentiment: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;sentiment&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="advanced-features">
<h2>Advanced Features<a class="headerlink" href="#advanced-features" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt><strong>Custom Base URL Support</strong></dt><dd><p>The client supports custom endpoints for Azure OpenAI or other compatible services:</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Via environment variable</span>
<span class="n">export</span> <span class="n">OPENAI_BASE_URL</span><span class="o">=</span><span class="s2">&quot;https://your-azure-instance.openai.azure.com/openai/deployments/your-deployment/v1&quot;</span>

<span class="c1"># The client automatically uses the custom endpoint</span>
</pre></div>
</div>
<dl class="simple">
<dt><strong>Safe HTTP Configuration</strong></dt><dd><p>The client includes enhanced HTTP safety features when available:</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Automatically uses SafeHttpClientFactory if available</span>
<span class="c1"># Falls back to standard OpenAI client if not</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">OpenAIClient</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>  <span class="c1"># Safe by default</span>
</pre></div>
</div>
<dl class="simple">
<dt><strong>Context Management</strong></dt><dd><p>Use the client as a context manager for proper resource cleanup:</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">OpenAIClient</span><span class="p">(</span><span class="n">config</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span>
    <span class="c1"># Client automatically closes connections when exiting</span>
</pre></div>
</div>
</section>
<section id="error-handling">
<h2>Error Handling<a class="headerlink" href="#error-handling" title="Link to this heading">¶</a></h2>
<p>The OpenAI client implements comprehensive error handling:</p>
<p><strong>Rate Limiting</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">chat_with_retry</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">input_data</span><span class="p">,</span> <span class="n">max_retries</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example retry logic for rate limiting.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_retries</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;429&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="ow">and</span> <span class="n">attempt</span> <span class="o">&lt;</span> <span class="n">max_retries</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">wait_time</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="n">attempt</span>  <span class="c1"># Exponential backoff</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">wait_time</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">raise</span>
</pre></div>
</div>
<p><strong>Configuration Validation</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Invalid configuration will raise errors during client creation</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">ILLMConfig</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;invalid-model&quot;</span><span class="p">)</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">OpenAIClient</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Network and API Errors</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">if</span> <span class="s2">&quot;authentication&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Check your OpenAI API key&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s2">&quot;quota&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;API quota exceeded&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="usage-tracking">
<h2>Usage Tracking<a class="headerlink" href="#usage-tracking" title="Link to this heading">¶</a></h2>
<p>The client provides detailed usage information compatible with OpenAI’s latest API format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;usage&quot;</span><span class="p">]:</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;usage&quot;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input tokens: </span><span class="si">{</span><span class="n">usage</span><span class="p">[</span><span class="s1">&#39;input_tokens&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Output tokens: </span><span class="si">{</span><span class="n">usage</span><span class="p">[</span><span class="s1">&#39;output_tokens&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total tokens: </span><span class="si">{</span><span class="n">usage</span><span class="p">[</span><span class="s1">&#39;total_tokens&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thinking tokens: </span><span class="si">{</span><span class="n">usage</span><span class="p">[</span><span class="s1">&#39;thinking_tokens&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># For reasoning models</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tool calling tokens: </span><span class="si">{</span><span class="n">usage</span><span class="p">[</span><span class="s1">&#39;tool_calling_tokens&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Function calls</span>

    <span class="c1"># Provider information</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Provider: </span><span class="si">{</span><span class="n">usage</span><span class="p">[</span><span class="s1">&#39;provider&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Model: </span><span class="si">{</span><span class="n">usage</span><span class="p">[</span><span class="s1">&#39;model&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Request ID: </span><span class="si">{</span><span class="n">usage</span><span class="p">[</span><span class="s1">&#39;request_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="performance-optimization">
<h2>Performance Optimization<a class="headerlink" href="#performance-optimization" title="Link to this heading">¶</a></h2>
<p><strong>Model Selection</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># For simple tasks</span>
<span class="n">config_fast</span> <span class="o">=</span> <span class="n">ILLMConfig</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="c1"># For complex reasoning</span>
<span class="n">config_powerful</span> <span class="o">=</span> <span class="n">ILLMConfig</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="c1"># For specific capabilities (check OpenAI docs for latest models)</span>
<span class="n">config_latest</span> <span class="o">=</span> <span class="n">ILLMConfig</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Token Management</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Limit response length for cost control</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">ILLMConfig</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span>
    <span class="n">max_tokens</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>  <span class="c1"># Shorter responses</span>
    <span class="n">temperature</span><span class="o">=</span><span class="mf">0.2</span>  <span class="c1"># More focused responses</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Streaming for Better UX</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use streaming for real-time user interfaces</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stream_to_user</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">input_data</span><span class="p">):</span>
    <span class="n">response_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">input_data</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">chunk</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;llm_response&quot;</span><span class="p">):</span>
            <span class="n">new_text</span> <span class="o">=</span> <span class="n">chunk</span><span class="p">[</span><span class="s2">&quot;llm_response&quot;</span><span class="p">]</span>
            <span class="c1"># Display incremental text to user</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">new_text</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">response_text</span><span class="p">):],</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">response_text</span> <span class="o">=</span> <span class="n">new_text</span>
</pre></div>
</div>
</section>
<section id="testing-integration">
<h2>Testing Integration<a class="headerlink" href="#testing-integration" title="Link to this heading">¶</a></h2>
<p>The OpenAI client is thoroughly tested with scenarios including:</p>
<ul class="simple">
<li><p>Simple knowledge queries with pattern validation</p></li>
<li><p>Structured output generation and validation</p></li>
<li><p>Sequential function calling with step-by-step execution</p></li>
<li><p>Parallel function calling for efficiency</p></li>
<li><p>Background task execution with verification</p></li>
<li><p>Streaming behavior validation</p></li>
<li><p>Usage tracking accuracy</p></li>
</ul>
<p>These tests ensure reliable behavior across different use cases and can serve as examples for your own implementations.</p>
</section>
<section id="implementation-notes">
<h2>Implementation Notes<a class="headerlink" href="#implementation-notes" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt><strong>OpenAI Responses API</strong></dt><dd><p>The client uses OpenAI’s latest Responses API for structured output and enhanced function calling capabilities.</p>
</dd>
<dt><strong>Progressive Function Execution</strong></dt><dd><p>Functions execute immediately when detected during streaming, providing real-time responsiveness.</p>
</dd>
<dt><strong>Safe HTTP Handling</strong></dt><dd><p>Enhanced HTTP client configuration when SafeHttpClientFactory is available, with graceful fallback.</p>
</dd>
<dt><strong>Resource Management</strong></dt><dd><p>Proper connection cleanup through context managers and destructor methods.</p>
</dd>
</dl>
</section>
<section id="limitations-and-considerations">
<h2>Limitations and Considerations<a class="headerlink" href="#limitations-and-considerations" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt><strong>Rate Limits</strong></dt><dd><p>OpenAI enforces rate limits based on your plan. Implement retry logic for production use.</p>
</dd>
<dt><strong>Cost Management</strong></dt><dd><p>Monitor token usage carefully, especially with advanced models. Consider using max_tokens limits.</p>
</dd>
<dt><strong>Model Availability</strong></dt><dd><p>Model names and availability change. The client works with any valid OpenAI model.</p>
</dd>
<dt><strong>Function Calling Limits</strong></dt><dd><p>Complex function calling scenarios may hit context length limits. Design functions to be concise.</p>
</dd>
<dt><strong>Streaming Consistency</strong></dt><dd><p>Streaming behavior may vary based on response length and complexity. Test thoroughly for your use cases.</p>
</dd>
</dl>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="azure-client.html"><span class="doc">Azure OpenAI Client</span></a> - Azure OpenAI integration</p></li>
<li><p><a class="reference internal" href="extending-llm-clients.html"><span class="doc">Extending LLM Clients</span></a> - Creating custom LLM clients</p></li>
<li><p><a class="reference internal" href="../agents/index.html"><span class="doc">Agents (Layer 2)</span></a> - Building agents with LLM clients</p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="azure-client.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Azure OpenAI Client</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="interface-overview.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">ILLM Interface Overview</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Nima Nazarian
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">OpenAI Client</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#supported-models">Supported Models</a></li>
<li><a class="reference internal" href="#basic-usage">Basic Usage</a></li>
<li><a class="reference internal" href="#function-calling">Function Calling</a></li>
<li><a class="reference internal" href="#structured-output">Structured Output</a></li>
<li><a class="reference internal" href="#advanced-features">Advanced Features</a></li>
<li><a class="reference internal" href="#error-handling">Error Handling</a></li>
<li><a class="reference internal" href="#usage-tracking">Usage Tracking</a></li>
<li><a class="reference internal" href="#performance-optimization">Performance Optimization</a></li>
<li><a class="reference internal" href="#testing-integration">Testing Integration</a></li>
<li><a class="reference internal" href="#implementation-notes">Implementation Notes</a></li>
<li><a class="reference internal" href="#limitations-and-considerations">Limitations and Considerations</a></li>
<li><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=95e61db4"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=30646c52"></script>
    </body>
</html>